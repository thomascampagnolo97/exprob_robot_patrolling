<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="robot_patrolling_explorer">

  <xacro:arg name="use_nominal_extrinsics" default="false"/>
  <xacro:arg name="add_plug" default="false" />
  <xacro:arg name="use_mesh" default="true" />

  <xacro:include filename="$(find exprob_robot_patrolling)/urdf/man_bot_patrolling.xacro" />
  <xacro:include filename="$(find exprob_robot_patrolling)/urdf/robot_patrolling_explorer.gazebo" />


  <xacro:macro name="cylinder_inertia" params="mass r l"> 
    <inertia ixx="${mass*(3*r*r+l*l)/12}" ixy = "0" ixz = "0"
                iyy="${mass*(3*r*r+l*l)/12}" iyz = "0" izz="${mass*(r*r)/2}" /> 
 </xacro:macro>


	<xacro:macro name="default_inertial" params="mass">
               <inertial>
                       <mass value="${mass}" />
                       <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
                       <inertia ixx="0.000526666666667" ixy="0" ixz="0" iyy="0.000526666666667" iyz="0" izz="0.001"/>
               </inertial>
	</xacro:macro>

  
  <material name="grey">
    <color rgba="0.9 0.9 0.9 1"/>
  </material>
  <material name="red">
    <color rgba="1 0 0 1"/>
  </material>

<link name="base_footprint"/>


  <link name="robot_base">
    <visual>
      <origin rpy="1.57 0 3.14" xyz="0.15 -0.117 0"/>
      <geometry>
        <mesh scale="0.001 0.001 0.001" filename="package://exprob_robot_patrolling/meshes/robot_chassis.STL"/>
      </geometry>
      <material name="red"/>
    </visual>
  
      <collision>
      <origin rpy="1.57 0 3.14" xyz="0.15 -0.117 0"/>
      <geometry>
        <mesh scale="0.001 0.001 0.001" filename="package://exprob_robot_patrolling/meshes/robot_chassis.STL"/>
      </geometry>
    </collision>

    <inertial>
      <mass value="5"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0395416666667" ixy="0" ixz="0" iyy="0.106208333333" iyz="0" izz="0.106208333333"/>
    </inertial>

  </link>

    <joint name="base_joint" type="fixed">
      <origin rpy="0 0 0" xyz="0 0 0" />
      <parent link="base_footprint"/>
      <child link="robot_base" />
    </joint>

  <joint name="chasis_to_rbot" type="fixed">
    <parent link="robot_base"/>
    <child link="rbot_base"/>
    <origin xyz="0 0 0.13787" rpy="0 0 0"/>
  </joint>



<link name="link_front_right_wheel">        
  <xacro:default_inertial mass="0.5"/>
  <collision name="link_front_right_wheel_collision">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>         
  </collision>      
       
  <visual name="link_front_right_wheel_visual">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>
    <material name="grey"/>         
  </visual> 
</link>

<joint name="joint_front_right_wheel" type="continuous">    
  <origin rpy="0 0 0" xyz="0.07 -0.1 0.035"/>    
  <child link="link_front_right_wheel" />    
  <parent link="robot_base"/>    
  <axis rpy="0 0 0" xyz="0 1 0"/>    
  <limit effort="10000" velocity="1000"/>    
  <joint_properties damping="1.0" friction="1.0" />  
</joint>

<link name="link_front_left_wheel">        
  <xacro:default_inertial mass="0.5"/>  
  <collision name="link_front_left_wheel_collision">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>         
  </collision>      
       
  <visual name="link_front_left_wheel_visual">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>       
    <material name="grey"/>  
  </visual>     
</link>

<joint name="joint_front_left_wheel" type="continuous">    
  <origin rpy="0 0 0" xyz="0.07 0.1 0.035"/>    
  <child link="link_front_left_wheel" />    
  <parent link="robot_base"/>    
  <axis rpy="0 0 0" xyz="0 1 0"/>    
  <limit effort="10000" velocity="1000"/>    
  <joint_properties damping="1.0" friction="1.0" />  
</joint>


<link name="link_rear_right_wheel">        
  <xacro:default_inertial mass="0.5"/>     
  <collision name="link_rear_right_wheel_collision">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>         
  </collision>      
       
  <visual name="link_rear_right_wheel_visual">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>
    <material name="grey"/>         
  </visual>
</link>

<joint name="joint_rear_right_wheel" type="continuous">    
  <origin rpy="0 0 0" xyz="-0.07 -0.1 0.035"/>    
  <child link="link_rear_right_wheel" />    
  <parent link="robot_base"/>    
  <axis rpy="0 0 0" xyz="0 1 0"/>    
  <limit effort="10000" velocity="1000"/>    
  <joint_properties damping="1.0" friction="1.0" />  
</joint>

<link name="link_rear_left_wheel">        
  <xacro:default_inertial mass="0.5"/>     
  <collision name="link_rear_left_wheel_collision">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>         
  </collision>      
       
  <visual name="link_rear_left_wheel_visual">      
    <origin rpy="0 1.5707 1.57" xyz="0 0 0"/>      
    <geometry>        
      <cylinder length="0.04" radius="0.035"/>    
    </geometry>       
    <material name="grey"/>  
  </visual>     
</link>

<joint name="joint_rear_left_wheel" type="continuous">    
  <origin rpy="0 0 0" xyz="-0.07 0.1 0.035"/>    
  <child link="link_rear_left_wheel" />    
  <parent link="robot_base"/>    
  <axis rpy="0 0 0" xyz="0 1 0"/>    
  <limit effort="10000" velocity="1000"/>    
  <joint_properties damping="1.0" friction="1.0" />  
</joint>


<link name="laser">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <cylinder radius="0.025" length="0.03"/>
      </geometry>
      <material name="dark_grey" />
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.025" length="0.03"/>
      </geometry>
    </collision>

    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.5" />
      <xacro:cylinder_inertia mass="0.5" r="0.025" l="0.03" />
    </inertial>
  </link>

  <joint name="joint_laser" type="fixed">
    <origin xyz="0.15 0 0.05" rpy="0 0 0"/>
    <parent link="robot_base"/>
    <child link="laser"/>
  </joint>


  <transmission name="joint_front_right_wheel_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_front_right_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_front_right_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalInterface>1</mechanicalInterface>
    </actuator>
  </transmission>

  <transmission name="joint_rear_right_wheel_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_rear_right_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_rear_right_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalInterface>1</mechanicalInterface>
    </actuator>
  </transmission>

  <transmission name="joint_front_left_wheel_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_front_left_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_front_left_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalInterface>1</mechanicalInterface>
    </actuator>
  </transmission>

  <transmission name="joint_rear_left_wheel_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_rear_left_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_rear_left_wheel">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalInterface>1</mechanicalInterface>
    </actuator>
  </transmission>

</robot>